"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-small"],{"./src/Modules/Trading/Components/Form/screen-small.jsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>tt});var a=r("../../node_modules/prop-types/index.js"),n=r.n(a),o=r("react"),i=r.n(o),l=r("@deriv/components"),u=r("./src/App/Components/Elements/ContentLoader/index.js"),c=r("../../node_modules/classnames/index.js"),s=r.n(c),m=r("./src/Stores/useTraderStores.tsx"),d=r("../stores/src/index.ts"),_=r("@deriv/translations"),p=function(e){var t=e.onChange,r=e.is_allow_equal,a=e.has_equals_only,n=e.className;return i().createElement("div",{className:s()("allow-equals","mobile-widget",n)},i().createElement(l.Checkbox,{label:(0,_.localize)("Equals"),value:r,name:"is_equal",onChange:function(e){e.persist();var r=e.target,a=r.name,n=r.checked;t({target:{name:a,value:Number(n)}})},disabled:a}),i().createElement(l.Text,{as:"p",size:"xxxs"},i().createElement(_.Localize,{i18n_default_text:"Win payout if exit spot is also equal to entry spot."})))};p.propTypes={className:n().string,is_allow_equal:n().bool,has_equals_only:n().bool,onChange:n().func};const f=(0,d.Pi)((function(){var e=(0,m.b)(),t={is_allow_equal:!!e.is_equal,has_equals_only:e.has_equals_only,onChange:e.onChange};return i().createElement(p,t)}));var b=r("./src/Stores/Modules/Trading/Helpers/allow-equals.ts"),v=r("@deriv/shared"),y=r("../../node_modules/lodash.debounce/index.js"),g=r.n(y),h=r("./src/Stores/Modules/Trading/Helpers/proposal.ts");function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==E(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=g()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=w(w({},e),t),n=(0,h.RX)(a),o={},i=function(e){!e.error&&e.subscription&&(o[e.subscription.id]=!0,r(e))};if(!(0,v.isEmptyObject)(n)){var l=n;Object.keys(l).forEach((function(e){v.WS.subscribeProposal(l[e],i)}))}return function(){Object.keys(o).forEach((function(e){v.WS.forget(e),delete o[e]}))}}),700),j=r("./src/Modules/Trading/Components/Form/TradeParams/min-max-stake-info.tsx"),M=(0,d.Pi)((function(e){var t=e.basis,r=e.duration_unit,a=e.duration_value,n=e.toggleModal,o=e.has_duration_error,u=e.selected_basis,c=e.setSelectedAmount,p=e.setAmountError,f=(0,d.oR)(),b=f.ui,y=f.client,g=b.addToast,h=y.currency,E=(0,m.b)(),x=E.is_turbos,w=E.is_vanilla,k=E.onChangeMultiple,S=E.trade_amount,M=E.trade_basis,C=E.trade_duration_unit,O=E.trade_duration,A=E.contract_type,P=(0,v.getDecimalPlaces)(h),T=Number("0").toFixed((0,v.getDecimalPlaces)(h)),N=parseFloat(T.toString().replace(/.$/,"1")),z=function(e){var t=i().createElement(_.Localize,{i18n_default_text:"Should not be 0 or empty"}),r=parseFloat(e.toString());return"0."===e.toString()||0===r?(g({key:"amount_error",content:t,type:"error",timeout:2e3}),p(!0),"error"):isNaN(r)||r<N||e.toString().length<1?(g({key:"amount_error",content:t,type:"error",timeout:2e3}),p(!0),!1):(p(!1),!0)};return i().createElement(i().Fragment,null,i().createElement("div",{className:"trade-params__stake-container"},(x||w)&&i().createElement(j.Z,null),i().createElement("div",{className:s()("trade-params__amount-keypad",{strike__pos:"vanilla"===A})},i().createElement(l.Numpad,{value:u,format:function(e){return isNaN(e)||""===e?e:Number(e).toFixed(P)},onSubmit:function(e){var i={};r===C||o||(i.duration_unit=r),a===O||o||(i.duration=a),e===S&&t===M||(i.basis=t,i.amount=e),(0,v.isEmptyObject)(i)||k(i),n()},currency:h,min:N,is_currency:!0,render:function(e){var t=e.value,r=e.className;return i().createElement("div",{className:r},parseFloat(t)>0?i().createElement(l.Money,{currency:h,amount:t,should_format:!1}):t)},reset_press_interval:450,reset_value:"",pip_size:P,onValidate:z,submit_label:(0,_.localize)("OK"),onValueChange:function(e){c(t,e),z(e)}}))))}));const C=(0,d.Pi)((function(e){var t=e.toggleModal,r=e.duration_value,a=e.duration_unit,n=e.has_duration_error,o=e.amount_tab_idx,u=e.setAmountError,c=e.setAmountTabIdx,s=e.setSelectedAmount,d=e.stake_value,_=e.payout_value,p=(0,m.b)(),f=p.basis,b=p.basis_list,v=void 0!==o?o:b.findIndex((function(e){return e.value===f}));return 1===b.length?i().createElement(M,{toggleModal:t,duration_value:r,duration_unit:a,has_duration_error:n,basis:b[0].value,setAmountError:u,selected_basis:"stake"===b[0].value?d:_,setSelectedAmount:s}):i().createElement("div",null,i().createElement(l.Tabs,{active_index:v,onTabItemClick:c,top:!0},b.map((function(e){switch(e.value){case"stake":return i().createElement("div",{label:e.text,key:e.value},i().createElement(M,{toggleModal:t,duration_value:r,duration_unit:a,has_duration_error:n,basis:e.value,setAmountError:u,selected_basis:d,setSelectedAmount:s}));case"payout":return i().createElement("div",{label:e.text,key:e.value},i().createElement(M,{toggleModal:t,duration_value:r,duration_unit:a,has_duration_error:n,basis:e.value,setAmountError:u,selected_basis:_,setSelectedAmount:s}));default:return null}}))))}));var O=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.jsx");function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const T=(0,d.Pi)((function(e){var t=e.is_open,r=e.toggleModal;(0,l.usePreventIOSZoom)();var a=(0,d.oR)().ui,n=a.enableApp,o=a.disableApp;return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:n,is_open:t,is_title_centered:!0,should_header_stick_body:!1,disableApp:o,toggleModal:r,height:"auto",width:"calc(100vw - 32px)",title:(0,_.localize)("Stake")},i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},i().createElement(N,{toggleModal:r}))))}));var N=(0,d.Pi)((function(e){var t=e.toggleModal,r=(0,m.b)(),a=r.amount,n=r.currency,o=r.trade_stop_out,u=A(i().useState(a),2),c=u[0],s=u[1],d=A(i().useState(null),2),p=d[0],f=d[1],b=A(i().useState(null),2),y=b[0],g=b[1],h=i().useRef(a),E=(0,v.useIsMounted)();return i().useEffect((function(){if(c!==a){var e=S(r,{amount:c},(function(e){var t,r,a=e.proposal,n=e.echo_req,o=e.subscription;E()&&a&&"MULTUP"===n.contract_type&&Number(n.amount)===Number(h.current)?(f(a.commission),g(null===(t=a.limit_order)||void 0===t||null===(r=t.stop_out)||void 0===r?void 0:r.order_amount)):null!=o&&o.id&&v.WS.forget(o.id)}));return function(){null==e||e()}}}),[c]),i().createElement(i().Fragment,null,i().createElement("div",{className:"trade-params__multiplier-ic-info-wrapper"},i().createElement(l.Popover,{alignment:"right",icon:"info",id:"dt_multiplier-stake__tooltip",zIndex:9999,is_bubble_hover_enabled:!0,message:i().createElement(_.Localize,{i18n_default_text:"To ensure your loss does not exceed your stake, your contract will be closed automatically when your loss equals to <0/>.",components:[i().createElement(l.Money,{key:0,amount:y||o,currency:n,show_currency:!0})]})})),i().createElement(C,{toggleModal:t,amount_tab_idx:0,setSelectedAmount:function(e,t){s(t),h.current=t},setAmountError:function(){},stake_value:c}),i().createElement(O.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:p,stop_out:y,amount:c}))}));const z=function(e){var t,r=e.items_list,a=e.contract_name,n=e.current_value_object,o=e.onChange,u=e.info,c=e.is_tooltip_disabled,s=void 0!==c&&c,m=e.popover_alignment,d=void 0===m?"right":m,_=e.toggleModal;return i().createElement(i().Fragment,null,i().createElement("div",{className:"trade-params__".concat(a,"-ic-info-wrapper")},i().createElement(l.Popover,{alignment:d,disable_target_icon:s,icon:"info",id:"dt_".concat(a,"-stake__tooltip"),is_bubble_hover_enabled:!0,zIndex:9999,message:u})),i().createElement(l.RadioGroup,{className:"trade-params__".concat(a,"-radio-group"),name:"trade-params__".concat(a,"-radio"),selected:Number.isNaN(n.value)?"":null===(t=n.value)||void 0===t?void 0:t.toString(),onToggle:function(e){o({target:{name:n.name,value:Number(e.target.value)}}),_()}},r.map((function(e){var t=e.text,r=e.value;return i().createElement(l.RadioGroup.Item,{key:r,id:t,label:t,value:null==r?void 0:r.toString()})}))))};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var F=(0,d.Pi)((function(e){var t=e.toggleModal,r=(0,m.b)(),a=r.amount,n=r.multiplier,o=r.multiplier_range_list,l=r.onChange,u=I(i().useState(null),2),c=u[0],s=u[1],d=I(i().useState(null),2),p=d[0],f=d[1],b=(0,v.useIsMounted)();return i().useEffect((function(){if(a){var e=S(r,{amount:a},(function(e){var t,r,n=e.echo_req,o=e.proposal,i=e.subscription;b()&&o&&"MULTUP"===n.contract_type&&Number(n.amount)===a?(s(o.commission),f(null===(t=o.limit_order)||void 0===t||null===(r=t.stop_out)||void 0===r?void 0:r.order_amount)):null!=i&&i.id&&v.WS.forget(i.id)}));return function(){null==e||e()}}}),[a]),i().createElement(i().Fragment,null,i().createElement(z,{contract_name:"multiplier",current_value_object:{name:"multiplier",value:n},info:(0,_.localize)("Your gross profit is the percentage change in market price times your stake and the multiplier chosen here."),items_list:o,onChange:l,toggleModal:t}),i().createElement(O.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:c,stop_out:p,amount:a}))}));const Z=F,q=(0,d.Pi)((function(e){var t,r,a=e.is_open,n=e.modal_title,o=e.toggleModal,u=(0,m.b)(),c=u.accumulator_range_list,s=u.growth_rate,p=u.onChange,f=u.tick_size_barrier,b=u.proposal_info,y=(0,d.oR)().ui,g=y.enableApp,h=y.disableApp;(0,l.usePreventIOSZoom)();var E=(null==b||null===(t=b.ACCU)||void 0===t?void 0:t.has_error)||!(null!=b&&null!==(r=b.ACCU)&&void 0!==r&&r.id)||(0,v.isEmptyObject)(b);return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:g,is_open:a,is_title_centered:!0,should_header_stick_body:!1,disableApp:h,toggleModal:o,height:"auto",width:"calc(100vw - 32px)",title:n},i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},n===(0,_.localize)("Multiplier")?i().createElement(Z,{toggleModal:o}):i().createElement(z,{contract_name:"accumulator",current_value_object:{name:"growth_rate",value:s},info:(0,_.localize)("Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within Â±{{tick_size_barrier}} from the previous spot price.",{growth_rate:(0,v.getGrowthRatePercentage)(s),tick_size_barrier:(0,v.getTickSizeBarrierPercentage)(f)}),is_tooltip_disabled:E,items_list:c.map((function(e){return{text:"".concat((0,v.getGrowthRatePercentage)(e),"%"),value:e}})),onChange:p,popover_alignment:"bottom",toggleModal:o}))))}));var L=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx"),R=(0,d.Pi)((function(e){var t=e.is_open,r=e.toggleModal,a=(0,d.oR)().ui,n=a.enableApp,o=a.disableApp;return i().createElement(i().Fragment,null,i().createElement(l.Modal,{enableApp:n,is_open:t,disableApp:o,toggleModal:r,has_close_icon:!1,should_header_stick_body:!1,height:"auto",width:"calc(100vw - 3.2rem)",title:(0,_.localize)("Expiration")},i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},i().createElement("div",{style:{minHeight:"120px",padding:"1.6rem"}},i().createElement(l.Text,{size:"xs",color:"general"},i().createElement(_.Localize,{i18n_default_text:"Your contract will be closed automatically at the next available asset price on <0></0>.",components:[i().createElement(L.Z,{key:0,is_text_only:!0,text_size:"xs"})]}))),i().createElement(l.Modal.Footer,{has_separator:!0},i().createElement(l.Button,{style:{width:"100%",height:"4rem"},large:!0,primary:!0,has_effect:!0,text:(0,_.localize)("OK"),onClick:r})))))}));R.propTypes={is_open:n().bool,toggleModal:n().func};const U=R;function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var $=function(e){var t=e.amount,r=e.currency,a=e.expiration,n=e.is_crypto_multiplier,o=G(i().useState(!1),2),u=o[0],c=o[1],s=G(i().useState(!1),2),m=s[0],d=s[1],p=function(){c(!u)},f=function(){d(!m)};return i().createElement(i().Fragment,null,i().createElement(T,{is_open:u,toggleModal:p}),i().createElement("div",{className:"mobile-widget mobile-widget__multiplier",onClick:p},i().createElement("div",{className:"mobile-widget__multiplier-amount"},i().createElement("div",{className:"mobile-widget__item"},i().createElement(l.Text,{weight:"bold",size:"xxs"},i().createElement(l.Money,{amount:t,currency:r,show_currency:!0})))),i().createElement(O.Z,{className:"mobile-widget__multiplier-trade-info",commission_text_size:"xxxxs",stop_out_text_size:"xxxxs"})),n&&i().createElement("div",{className:"mobile-widget",onClick:a?f:null},i().createElement("div",{className:"mobile-widget__multiplier-expiration"},i().createElement(l.Text,{size:"xxs"},(0,_.localize)("Expires on")),i().createElement(L.Z,{is_text_only:!0,text_size:"xxs"})),i().createElement(U,{is_open:m,toggleModal:f})))},W=(0,d.Pi)((function(){var e=(0,m.b)(),t={amount:e.amount,expiration:e.expiration,currency:e.currency,is_crypto_multiplier:e.is_crypto_multiplier,multiplier:e.multiplier};return i().createElement($,t)})),Y=function(e){var t=e.displayed_trade_param,r=e.modal_title,a=G(i().useState(!1),2),n=a[0],o=a[1],l=function(){o(!n)};return i().createElement(i().Fragment,null,i().createElement(q,{is_open:n,toggleModal:l,modal_title:r}),i().createElement("div",{className:"mobile-widget mobile-widget__multiplier-options",onClick:l},i().createElement("div",{className:"mobile-widget__item"},i().createElement("span",{className:"mobile-widget__item-value"},t))))},B=(0,d.Pi)((function(){var e=(0,m.b)().multiplier,t="x".concat(e),r=(0,_.localize)("Multiplier");return i().createElement(Y,{displayed_trade_param:t,modal_title:r})})),H=(0,d.Pi)((function(){var e=(0,m.b)().growth_rate,t="".concat((0,v.getGrowthRatePercentage)(e),"%"),r=(0,_.localize)("Growth rate");return i().createElement(Y,{displayed_trade_param:t,modal_title:r})})),K=r("./src/Modules/Trading/Components/Form/LabeledQuantityInputMobile/index.js"),Q=(0,d.Pi)((function(e){var t=e.is_nativepicker,r=(0,d.oR)(),a=r.ui,n=r.client,o=a.current_focus,u=a.setCurrentFocus,c=n.is_single_currency,p=(0,m.b)(),f=p.amount,b=p.currency,y=p.onChange;return i().createElement(i().Fragment,null,i().createElement(l.MobileWrapper,null,i().createElement(K.Z,{input_label:(0,_.localize)("Stake"),className:s()("trade-container__amount","trade-container__amount--accumulator"),classNameInlinePrefix:"trade-container__currency",classNameInput:s()("trade-container__input","trade-container__input--accumulator"),currency:b,current_focus:o,fractional_digits:(0,v.getDecimalPlaces)(b),id:"dt_amount_input",inline_prefix:c?b:null,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_nativepicker:t,is_negative_disabled:!0,max_length:v.AMOUNT_MAX_LENGTH,name:"amount",onChange:y,type:"tel",value:f,ariaLabel:(0,_.localize)("Amount"),setCurrentFocus:u})))}));Q.propTypes={is_nativepicker:n().bool};const X=Q;var J=r("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.jsx"),ee=r("./src/Modules/Trading/Components/Form/TradeParams/barrier.jsx"),te=r("../../node_modules/moment/moment.js"),re=r.n(te);function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var oe=(0,_.localize)("OK"),ie=function(e,t,r,a,n,o){"stake"===a&&t!==o?(e.basis="stake",e.amount=t):"payout"===a&&r!==o?(e.basis="payout",e.amount=r):n!==a&&(e.basis=a,e.amount=o)},le=(0,d.Pi)((function(e){var t=e.setDurationError,r=e.basis_option,a=e.toggleModal,n=e.has_amount_error,o=e.payout_value,u=e.stake_value,c=e.selected_duration,s=e.setSelectedDuration,d=(0,m.b)(),p=d.duration_min_max,f=d.duration,b=d.duration_unit,y=d.basis,g=d.amount,h=d.onChangeMultiple;i().useEffect((function(){t(!1)}),[]);var E=ae((0,v.getDurationMinMaxValues)(p,"tick","t"),2),x=E[0],w=E[1],k=f<x&&c<x?x:c;return i().createElement("div",{className:"trade-params__duration-tickpicker"},i().createElement(l.TickPicker,{default_value:k,submit_label:oe,max_value:w,min_value:x,onSubmit:function(e){var t=e.target.value,i={};n||ie(i,u,o,r,y,g),f===t&&"t"===b||(i.duration_unit="t",i.duration=t),(0,v.isEmptyObject)(i)||h(i),a()},onValueChange:function(e){return s("t",e)},singular_label:(0,_.localize)("Tick"),plural_label:(0,_.localize)("Ticks")}))})),ue=(0,d.Pi)((function(e){var t=e.basis_option,r=e.contract_expiry,a=void 0===r?"intraday":r,n=e.duration_unit_option,o=e.duration_values,u=e.expiry_epoch,c=e.has_amount_error,s=e.payout_value,p=e.selected_duration,f=e.setDurationError,b=e.setSelectedDuration,y=e.stake_value,g=e.show_expiry,h=void 0!==g&&g,E=e.toggleModal,x=(0,d.oR)().ui.addToast,w=(0,m.b)(),k=w.duration_min_max,S=w.duration,j=w.duration_unit,M=w.basis,C=w.amount,O=w.onChangeMultiple,A=n.value,P=ae((0,v.getDurationMinMaxValues)(k,a,A),2),T=P[0],N=P[1],z=ae(i().useState(!1),2),I=z[0],D=z[1],F=function(e){var t=i().createElement(_.Localize,{i18n_default_text:"Should be between {{min}} and {{max}}",values:{min:T,max:(0,v.addComma)(N,0,!1)}});return parseInt(e)<T||parseInt(p)>N?(x({key:"duration_error",content:t,type:"error",timeout:2e3}),f(!0),D(!0),"error"):parseInt(e)>N?(x({key:"duration_error",content:t,type:"error",timeout:2e3}),D(!0),"error"):e.toString().length<1?(x({key:"duration_error",content:t,type:"error",timeout:2e3}),f(!0),D(!0),!1):(f(!1),D(!1),!0)};return i().createElement("div",{className:"trade-params__amount-keypad"},h&&i().createElement(l.Text,{as:"div",size:"xxxs",line_height:"s",className:"expiry-text-container--mobile"},i().createElement(_.Localize,{i18n_default_text:"Expiry: {{date}}",values:{date:I?"":function(e,t){if("d"!==j)return re().utc().add(Number(t),"days").format("D MMM YYYY, [23]:[59]:[59] [GMT +0]");var r=new Date(1e3*(e-24*S*60*60));return t&&(r=new Date(r.getTime()+24*t*60*60*1e3)),r.toUTCString().replace("GMT","GMT +0").substring(5).replace(/(\d{2}) (\w{3} \d{4})/,"$1 $2,")}(u,null==o?void 0:o.d_duration)}})),i().createElement(l.Numpad,{value:p,onSubmit:function(e){var r={};c||ie(r,y,s,t,M,C),S===e&&j===A||(r.duration_unit=A,r.duration=e,r.expiry_type="duration"),(0,v.isEmptyObject)(r)||O(r),E()},render:function(e){var t=e.value,r=e.className;return i().createElement("div",{className:r},t)},pip_size:0,submit_label:oe,min:T,max:N,reset_press_interval:350,reset_value:"",onValidate:F,onValueChange:function(e){b(A,e),F(e)}}))}));const ce=(0,d.Pi)((function(e){var t=e.amount_tab_idx,r=e.d_duration,a=e.duration_tab_idx,n=e.expiry_epoch,o=e.h_duration,u=e.has_amount_error,c=e.m_duration,s=e.payout_value,d=e.s_duration,p=e.setDurationError,f=e.setDurationTabIdx,b=e.setSelectedDuration,y=e.stake_value,g=e.t_duration,h=e.toggleModal,E=(0,m.b)(),x=E.duration_units_list,w=E.duration_min_max,k=E.duration_unit,S=E.basis,j={t_duration:g,s_duration:d,m_duration:c,h_duration:o,d_duration:r},M=void 0!==a?a:x.findIndex((function(e){return e.value===k})),C=ae((0,v.getDurationMinMaxValues)(w,"daily","d"),2),O=C[0],A=C[1],P=function(e){b("d",e)},T=function(){return 0===t?"stake":1===t?"payout":S};return i().createElement("div",null,i().createElement(l.Tabs,{active_index:M,onTabItemClick:function(e){return function(e){f(e);var t=x[e].value;b(t,j["".concat(t,"_duration")])}(e)},single_tab_has_no_label:!0,top:!0},x.map((function(e){switch(e.value){case"t":return i().createElement("div",{label:e.text,key:e.value},i().createElement(le,{basis_option:T(),has_amount_error:u,toggleModal:h,selected_duration:g,setDurationError:p,setSelectedDuration:b,stake_value:y,payout_value:s}));case"s":return i().createElement("div",{label:e.text,key:e.value},i().createElement(ue,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,selected_duration:d,setDurationError:p,setSelectedDuration:b,stake_value:y,payout_value:s}));case"m":return i().createElement("div",{label:e.text,key:e.value},i().createElement(ue,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,selected_duration:c,setDurationError:p,setSelectedDuration:b,stake_value:y,payout_value:s}));case"h":return i().createElement("div",{label:e.text,key:e.value},i().createElement(ue,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,selected_duration:o,setDurationError:p,setSelectedDuration:b,stake_value:y,payout_value:s}));case"d":return i().createElement("div",{label:e.text,key:e.value},i().createElement(ue,{basis_option:T(),has_amount_error:u,toggleModal:h,duration_unit_option:e,contract_expiry:"daily",selected_duration:r,setDurationError:p,setSelectedDuration:b,stake_value:y,show_expiry:!0,payout_value:s,expiry_epoch:n,duration_values:j}),i().createElement(l.RelativeDatepicker,{onChange:P,min_date:O,max_date:A,title:(0,_.localize)("Pick an end date")}));default:return null}}))))}));var se=r("./src/Modules/Trading/Components/Form/TradeParams/last-digit.jsx");function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==me(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==me(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===me(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=Object.freeze({t:5,s:15,m:3,h:1,d:1}),ve=function(e,t){return pe(pe({},e),t)};const ye=(0,d.Pi)((function(e){var t,r,a=e.is_open,n=e.toggleModal,o=(0,d.oR)(),u=o.client,c=o.ui,s=u.currency,_=c.enableApp,p=c.disableApp,f=(0,m.b)(),b=f.amount,v=f.form_components,y=f.duration,g=f.duration_unit,h=f.duration_units_list,E=i().useCallback((t=y,r=g,function(e){return r===e?t:be[e]}),[]),x=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useReducer(ve,{trade_param_tab_idx:0,duration_tab_idx:void 0,amount_tab_idx:void 0,has_amount_error:!1,has_duration_error:!1,curr_duration_unit:g,curr_duration_value:y,t_duration:E("t"),s_duration:E("s"),m_duration:E("m"),h_duration:E("h"),d_duration:E("d"),stake_value:b,payout_value:b}),2),w=x[0],k=x[1];(0,l.usePreventIOSZoom)(),i().useEffect((function(){j(g,y),S(void 0)}),[y,g]);var S=function(e){return k({duration_tab_idx:e})},j=function(e,t){var r;k((fe(r={},"".concat(e,"_duration"),t),fe(r,"curr_duration_unit",e),fe(r,"curr_duration_value",t),r))};return i().createElement(i().Fragment,null,i().createElement(l.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:_,is_open:a,header:i().createElement("div",null),disableApp:p,toggleModal:n,height:"auto",width:"calc(100vw - 32px)"},i().createElement(l.ThemedScrollbars,null,i().createElement(l.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"120px"},i().createElement(ge,{currency:s,toggleModal:n,isVisible:function(e){return v.includes(e)},setTradeParamTabIdx:function(e){return k({trade_param_tab_idx:e})},trade_param_tab_idx:w.trade_param_tab_idx,setDurationTabIdx:S,duration_tab_idx:w.duration_tab_idx,setAmountTabIdx:function(e){return k({amount_tab_idx:e})},amount_tab_idx:w.amount_tab_idx,setSelectedAmount:function(e,t){return k(fe({},"".concat(e,"_value"),t))},stake_value:w.stake_value,payout_value:w.payout_value,duration_unit:w.curr_duration_unit,duration_value:w.curr_duration_value,duration_units_list:h,has_amount_error:w.has_amount_error,setAmountError:function(e){k({has_amount_error:e})},setSelectedDuration:j,has_duration_error:w.has_duration_error,setDurationError:function(e){k({has_duration_error:e})},t_duration:w.t_duration,s_duration:w.s_duration,m_duration:w.m_duration,h_duration:w.h_duration,d_duration:w.d_duration})))))}));var ge=(0,d.Pi)((function(e){var t=e.currency,r=e.toggleModal,a=e.isVisible,n=e.setAmountTabIdx,o=e.amount_tab_idx,u=e.setTradeParamTabIdx,c=e.trade_param_tab_idx,d=e.setDurationTabIdx,p=e.duration_unit,f=e.duration_units_list,b=e.duration_value,v=e.duration_tab_idx,y=e.has_amount_error,g=e.has_duration_error,h=e.setAmountError,E=e.setSelectedAmount,x=e.stake_value,w=e.payout_value,k=e.setDurationError,S=e.setSelectedDuration,j=e.t_duration,M=e.s_duration,O=e.m_duration,A=e.h_duration,P=e.d_duration,T=(0,m.b)(),N=T.basis_list,z=T.basis,I=T.expiry_epoch,D=T.is_turbos,F=T.is_vanilla,Z=function(e){switch(e){case"duration":return i().createElement("div",{className:"trade-params__header"},i().createElement("div",{className:"trade-params__header-label"},(0,_.localize)("Duration")),i().createElement("div",{className:s()("trade-params__header-value",{"trade-params__header-value--has-error":g})},g?(0,_.localize)("Error"):(a=f.find((function(e){return e.value===p})),"".concat(b," ").concat(a&&(b>1?(0,_.localize)(a.text):(0,_.localize)(a.text.slice(0,-1)))))));case"amount":return i().createElement("div",{className:"trade-params__header"},i().createElement("div",{className:"trade-params__header-label"},D||F?(0,_.localize)("Stake"):(0,_.localize)("Amount")),i().createElement("div",{className:s()("trade-params__header-value",{"trade-params__header-value--has-error":y})},y?(0,_.localize)("Error"):(r=void 0!==o?o:N.findIndex((function(e){return e.value===z})),i().createElement(l.Money,{currency:t,show_currency:!0,amount:1===r?w:x}))));default:return null}var r,a};return i().createElement(l.Tabs,{active_index:c,className:"trade-params-duration-amount",onTabItemClick:u,top:!0},a("duration")&&i().createElement("div",{"data-header-content":Z("duration")},i().createElement(ce,{toggleModal:r,amount_tab_idx:o,duration_tab_idx:v,setDurationTabIdx:d,setSelectedDuration:S,setDurationError:k,has_amount_error:y,t_duration:j,s_duration:M,m_duration:O,h_duration:A,d_duration:P,stake_value:x,payout_value:w,expiry_epoch:I})),a("amount")&&i().createElement("div",{"data-header-content":Z("amount")},i().createElement(C,{duration_unit:p,duration_value:b,toggleModal:r,amount_tab_idx:o,setAmountTabIdx:n,has_duration_error:g,setSelectedAmount:E,setAmountError:h,stake_value:x,payout_value:w})))})),he=(0,d.Pi)((function(){return(0,m.b)().form_components.includes("last_digit")&&i().createElement(se.Z,null)})),Ee=(0,d.Pi)((function(){return(0,m.b)().form_components.includes("barrier")&&i().createElement(ee.Z,null)})),xe=r("./src/Modules/Trading/Containers/contract-type.jsx");function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Se=(0,d.Pi)((function(e){var t=e.toggleDigitsWidget,r=e.is_collapsed,a=(0,d.oR)().ui.onChangeUiStore,n=(0,m.b)(),o=n.amount,u=n.basis,c=n.currency,s=n.duration,p=n.duration_min_max,f=n.duration_unit,b=n.form_components,y=n.is_multiplier,g=n.last_digit,h=n.onChange,E=we(i().useState(!1),2),x=E[0],w=E[1];i().useEffect((function(){k()}));var k=function(){var e=(0,v.getExpiryType)(n),t=we((0,v.getDurationMinMaxValues)(p,e,f),2),r=t[0],o=t[1];"tick"===e&&s<r&&(a({name:"duration_".concat(f),value:r}),h({target:{name:"duration",value:r}})),!(s<r)&&s>o&&(a({name:"duration_".concat(f),value:o}),h({target:{name:"duration",value:o}}))},S=function(){return w(!x)},j=(0,v.getLocalizedBasis)();return i().createElement("div",{className:"mobile-widget__wrapper"},y?i().createElement(W,null):i().createElement("div",{id:"duration_amount_selector",className:"mobile-widget",onClick:S},i().createElement("div",{className:"mobile-widget__duration"},function(){if(!f)return"";var e={t:[(0,_.localize)("tick"),(0,_.localize)("ticks")],s:[(0,_.localize)("second"),(0,_.localize)("seconds")],m:[(0,_.localize)("min"),(0,_.localize)("mins")],h:[(0,_.localize)("hour"),(0,_.localize)("hours")],d:[(0,_.localize)("day"),(0,_.localize)("days")]};try{if(!f)return"";var t=1==+s?e[f][0]:e[f][1];return"".concat(s," ").concat(t)}catch(e){return""}}()),i().createElement("div",{className:"mobile-widget__amount"},i().createElement(l.Money,{amount:o,currency:c,show_currency:!0})),i().createElement("div",{className:"mobile-widget__type"},function(){switch(u){case"stake":return j.stake;case"payout":return j.payout;default:return u}}())),i().createElement(ye,{is_open:x,toggleModal:S}),("last_digit",b.includes("last_digit")&&r&&i().createElement("div",{className:"mobile-widget",onClick:t},i().createElement("div",{className:"mobile-widget__amount"},i().createElement(_.Localize,{i18n_default_text:"Digit: {{last_digit}} ",values:{last_digit:g}})))))}));const je=Se;var Me=r("./src/Modules/Trading/Containers/purchase.tsx"),Ce=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx"),Oe=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx"),Ae=r("./src/Stores/Modules/Trading/Helpers/multiplier.ts"),Pe=r("./src/App/Components/Form/fieldset.jsx");function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Ne=(0,d.Pi)((function(e){var t=e.is_visible,r=e.onConfirm,a=e.onCancel,n=(0,d.oR)().ui,o=n.disableApp,u=n.enableApp,c=n.should_show_cancellation_warning,s=n.toggleCancellationWarning;return i().createElement(l.Dialog,{className:"trade-params__multiplier-deal-cancellation-dialog",title:(0,_.localize)("About deal cancellation"),confirm_button_text:(0,_.localize)("Got it"),cancel_button_text:(0,_.localize)("Cancel"),onConfirm:r,onCancel:a,is_mobile_full_width:!1,is_visible:t,disableApp:o,enableApp:u,portal_element_id:"modal_root"},i().createElement(l.Text,{size:"xxxs",color:"general"},i().createElement(_.Localize,{i18n_default_text:"Take profit and/or stop loss are not available while deal cancellation is active."})),i().createElement(l.Checkbox,{defaultChecked:!c,onChange:function(){return s()},name:"should_show_cancellation_warning",label:(0,_.localize)("Don't show this again")}))}));const ze=(0,d.Pi)((function(e){var t=e.has_cancellation,r=e.has_take_profit,a=e.has_stop_loss,n=e.onChangeMultiple,o=e.cancellation_duration,u=(0,d.oR)().ui.should_show_cancellation_warning,c=(0,m.b)().cancellation_range_list,s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!1),2),p=s[0],f=s[1];return i().createElement(i().Fragment,null,i().createElement(Ne,{is_visible:p,onCancel:function(){return f(!1)},onConfirm:function(){f(!1),(0,Ae.L)({has_cancellation:t,onChangeMultiple:n})}}),i().createElement(Pe.Z,{className:"trade-container__fieldset"},i().createElement("div",{className:"dc-input-wrapper--inline"},i().createElement(l.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){var e;(e=(r||a)&&u)&&f(e),e||(0,Ae.L)({has_cancellation:t,onChangeMultiple:n})},name:"has_cancellation",label:(0,_.localize)("Deal cancellation"),defaultChecked:t}),i().createElement(l.Popover,{alignment:"left",icon:"info",id:"dt_multiplier-stake__tooltip",is_bubble_hover_enabled:!0,classNameBubble:"trade-container__deal-cancellation-popover",zIndex:9999,message:(0,_.localize)("Cancel your trade anytime within a chosen time-frame. Triggered automatically if your trade reaches the stop out level within the chosen time-frame.")})),t&&i().createElement(i().Fragment,null,i().createElement(l.RadioGroup,{className:"trade-params__multiplier-radio-group",name:"trade-params__multiplier-radio",selected:o,onToggle:function(e){return(0,Ae.Q)({event:e,onChangeMultiple:n})}},c.map((function(e){var t=e.text,r=e.value;return i().createElement(l.RadioGroup.Item,{key:r,id:t,label:t,value:r.toString()})}))))))}));function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==Ie(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const Re=(0,d.Pi)((function(e){var t,r,a=e.is_open,n=e.onClose,o=e.toggleDialog,u=(0,m.b)(),c=u.is_turbos,d=u.take_profit,p=u.has_take_profit,f=u.has_stop_loss,b=u.stop_loss,y=u.has_cancellation,g=u.cancellation_range_list,h=u.cancellation_duration,E=u.onChangeMultiple,x={take_profit:d,stop_loss:b,has_take_profit:p,has_stop_loss:f,has_cancellation:y,cancellation_duration:h},w=qe(i().useState(x),2),k=w[0],S=w[1],j=qe(i().useState({}),2),M=j[0],C=j[1],O=(null==g?void 0:g.length)>0,A=function(e){var t=["has_take_profit","has_stop_loss","has_cancellation",e.has_take_profit&&"take_profit",e.has_stop_loss&&"stop_loss",e.has_cancellation&&"cancellation_duration"];return(0,v.pick)(e,t)},P=function(e){C({take_profit:e.has_take_profit&&!e.take_profit?[(0,_.localize)("Please enter a take profit amount.")]:[],stop_loss:e.has_stop_loss&&!e.stop_loss?[(0,_.localize)("Please enter a stop loss amount.")]:[]})},T=function(e){var t=e.target,r=t.name,a=t.value,n=Fe({},k);n[r]=a,S(n),P(n)},N=function(e){var t=Fe({},k);Object.assign(t,e),S(t),P(t)};return i().createElement(i().Fragment,null,i().createElement(l.MobileDialog,{portal_element_id:"modal_root",visible:a,has_content_scroll:!0,onClose:function(){S(x),n.apply(void 0,arguments)}},i().createElement(l.Div100vhContainer,{className:s()("trade-params__multiplier-risk-management-dialog",{"trade-params__multiplier-risk-management-dialog--no-cancel":!O}),height_offset:"54px"},i().createElement(Oe.Z,{take_profit:k.take_profit,has_take_profit:k.has_take_profit,onChange:T,onChangeMultiple:N,validation_errors:M}),!c&&i().createElement(Ce.Z,{stop_loss:k.stop_loss,has_stop_loss:k.has_stop_loss,onChange:T,onChangeMultiple:N,validation_errors:M}),O&&i().createElement(ze,{has_take_profit:k.has_take_profit,has_stop_loss:k.has_stop_loss,has_cancellation:k.has_cancellation,cancellation_duration:k.cancellation_duration,onChangeMultiple:N}),i().createElement("div",{className:"trade-params__multiplier-risk-management-dialog-bottom-separator"}),i().createElement("div",{className:"trade-params__multiplier-risk-management-dialog-apply-button"},i().createElement(l.Button,{text:(0,_.localize)("Apply"),onClick:function(){E(k),o()},primary:!0,is_disabled:(null===(t=M.take_profit)||void 0===t?void 0:t.length)>0||(null===(r=M.stop_loss)||void 0===r?void 0:r.length)>0||(0,v.isDeepEqual)(A(k),A(x))})))))}));function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const Ge=(0,d.Pi)((function(){var e,t=(0,m.b)(),r=t.currency,a=t.stop_loss,n=t.take_profit,o=t.has_take_profit,u=t.has_stop_loss,c=t.cancellation_duration,s=t.cancellation_range_list,d=t.has_cancellation,p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!1),2),f=p[0],b=p[1],v=o||u||d,y=null===(e=s.find((function(e){return e.value===c})))||void 0===e?void 0:e.text;return i().createElement(i().Fragment,null,i().createElement(Re,{is_open:f,toggleDialog:function(){b(!f)},onClose:function(){return b(!1)}}),i().createElement("div",{className:"mobile-widget mobile-widget__multiplier-risk-management",onClick:function(){return b(!f)}},!v&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Risk management")),i().createElement("div",{className:"mobile-widget__item-value"},(0,_.localize)("Not set"))),o&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Take profit")),i().createElement("div",{className:"mobile-widget__item-value"},i().createElement(l.Money,{amount:n,currency:r,show_currency:!0}))),u&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Stop loss")),i().createElement("div",{className:"mobile-widget__item-value"},i().createElement(l.Money,{amount:a,currency:r,show_currency:!0}))),d&&i().createElement("div",{className:"mobile-widget__item"},i().createElement("div",{className:"mobile-widget__item-label"},(0,_.localize)("Deal Cancellation")),i().createElement("div",{className:"mobile-widget__item-value"},y))))}));var Ve=r("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),$e=r("./src/Modules/Trading/Components/Form/TradeParams/strike.jsx"),We=r("./src/Modules/Trading/Components/Form/TradeParams/Turbos/barrier-selector.tsx"),Ye=(0,d.Pi)((function(){var e=(0,m.b)(),t=e.currency,r=e.proposal_info,a=e.contract_type,n=e.vanilla_trade_type,o=(0,v.isVanillaContract)(a)?n:null==a?void 0:a.toUpperCase(),u=(null==r?void 0:r[o])||{},c=u.has_error,s=u.has_increased,d=u.id,p=u.message,f=u.obj_contract_basis||{},b=f.text,y=f.value,g=c||!d,h={Long:(0,_.localize)("For Long:"),Short:(0,_.localize)("For Short:")},E=(0,v.isVanillaContract)(a)?i().createElement(_.Localize,{i18n_default_text:"The payout at expiry is equal to the payout per point multiplied by the difference between the final price and the strike price."}):i().createElement(_.Localize,{i18n_default_text:"<0>{{title}}</0> {{message}}",components:[i().createElement(l.Text,{key:0,weight:"bold",size:"xxs"})],values:{title:h[(0,v.getContractSubtype)(o)],message:p}});return y?i().createElement(Pe.Z,{className:"payout-per-point"},i().createElement("div",{className:"payout-per-point__label-wrapper"},i().createElement(l.Text,{size:"xs",color:"less-prominent",className:"payout-per-point__label"},b),i().createElement(l.Popover,{alignment:"top",icon:"info",is_bubble_hover_enabled:!0,margin:0,zIndex:"9999",message:p?E:""})),i().createElement(l.Text,{size:"xs",weight:"bold",className:"payout-per-point__value"},i().createElement(l.Money,{amount:y,currency:t,show_currency:!0,should_format:!1}),i().createElement("span",{className:"trade-container__price-info-movement"},!g&&null!==s&&s?i().createElement(l.Icon,{icon:"IcProfit"}):i().createElement(l.Icon,{icon:"IcLoss"})))):i().createElement(Pe.Z,{className:"payout-per-point"})}));const Be=Ye;var He=r("./src/Modules/Trading/Components/Form/TradeParams/trade-type-tabs.tsx");function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qe.apply(this,arguments)}function Xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==Ke(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ke(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Je=function(e){var t=e.form_components,r=e.has_allow_equals,a=e.has_take_profit,n=e.previous_symbol,o=e.is_allow_equal,u=e.is_accumulator,c=e.is_multiplier,m=e.is_trade_params_expanded,d=e.is_turbos,_=e.is_vanilla,p=e.onChange,b=e.take_profit,v=e.setIsTradeParamsExpanded;i().useEffect((function(){n&&o&&r&&v(!0)}),[n]);var y=!m,g=function(e){return t.includes(e)};return i().createElement(l.Collapsible,{position:"top",is_collapsed:y,onClick:function(e){v(e)}},u&&y&&i().createElement(Ve.Z,null),i().createElement("div",{className:"trade-params__contract-type-container"},i().createElement(xe.Z,null),c&&i().createElement(B,null),g("trade_type_tabs")&&i().createElement(He.Z,null),u&&i().createElement(H,null)),g("last_digit")&&i().createElement("div",{"data-collapsible":"true"},i().createElement(he,null)),g("barrier")&&i().createElement("div",{"data-collapsible":"true"},i().createElement(Ee,null)),g("barrier_selector")&&i().createElement("div",{"data-collapsible":"true"},i().createElement(We.Z,null)),g("strike")&&i().createElement("div",{"data-collapsible":"true"},i().createElement($e.Z,null)),!u&&i().createElement(je,{is_collapsed:y,toggleDigitsWidget:function(){v(!0)}}),r&&i().createElement("div",{"data-collapsible":"true"},i().createElement(f,null)),(c||d)&&i().createElement("div",{"data-collapsible":"true"},i().createElement(Ge,null)),u&&[i().createElement(X,{key:"accu_amount"}),i().createElement("div",{"data-collapsible":"true",key:"accu_take_profit",className:s()("take-profit","mobile-widget")},i().createElement(Oe.Z,{take_profit:b,has_take_profit:a,onChange:p,has_info:!1})),i().createElement("div",{"data-collapsible":"true",key:"accu_info"},i().createElement(J.Z,null))],(d||_)&&i().createElement(Be,null),i().createElement("div",{className:s()(Xe({"purchase-container":!_},"purchase-container__".concat(u?"accumulator":"turbos"),u||d))},i().createElement(Me.Z,null)))},et=(0,d.Pi)((function(e){var t=e.is_trade_enabled,r=(0,m.b)(),a=r.is_accumulator,n=r.is_multiplier,o=r.is_turbos,l=r.is_vanilla,c=r.duration_unit,s=r.contract_types_list,d=r.contract_type,_=r.expiry_type,p=r.contract_start_type,f={is_accumulator:a,is_multiplier:n,is_turbos:o,is_vanilla:l,form_components:r.form_components,has_take_profit:r.has_take_profit,onChange:r.onChange,previous_symbol:r.previous_symbol,is_trade_params_expanded:r.is_trade_params_expanded,setIsTradeParamsExpanded:r.setIsTradeParamsExpanded,take_profit:r.take_profit,is_allow_equal:!!r.is_equal},v=(0,b.OW)(s,c,p),y=(0,b.vy)(s),g=(0,b.i$)(d)&&(v||"endtime"===_)&&y;return t?i().createElement(Je,Qe({has_allow_equals:g},f)):i().createElement("div",{className:"mobile-wrapper__content-loader"},i().createElement(u.G,{speed:2}))}));et.propTypes={is_trade_enabled:n().bool};const tt=et}}]);