/*! For license information please see p2p.buy-sell-modal.31369f257e7fb162fa48.js.LICENSE.txt */
(self.webpackChunk_deriv_p2p=self.webpackChunk_deriv_p2p||[]).push([[633],{9978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(2609),a=r.n(n)()((function(e){return e[1]}));a.push([e.id,".buy-sell__modal{opacity:1 !important}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal .dc-mobile-full-page-modal__header--border-bottom{border-bottom:2px solid var(--general-section-1)}}.buy-sell__modal-body{position:relative;display:block;padding-top:2.4rem}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal-body>form{height:-moz-fit-content !important;height:fit-content !important}}.buy-sell__modal-danger{margin-bottom:1.6rem;width:-moz-fit-content;width:fit-content;align-items:flex-start}.buy-sell__modal-field{margin-bottom:0 !important}.buy-sell__modal-field{flex:1;height:-moz-fit-content;height:fit-content}.buy-sell__modal-field .dc-input__container{width:91%;padding:.5rem 1rem .5rem 1.2rem}.buy-sell__modal-field--disable{opacity:.32}.buy-sell__modal-field--textarea{border-top:1px solid var(--general-section-5);margin-bottom:3.5rem;padding:1.8rem 2.4rem 0}.buy-sell__modal-field--textarea .dc-input__container{height:9.7rem}.buy-sell__modal-field--textarea .dc-input__field{height:100% !important}.buy-sell__modal-field-wrapper{display:flex;margin:-2.4rem 0 1.6rem -2.4rem;padding:0 2.4rem;word-break:break-word}.buy-sell__modal-field-wrapper>*{margin:2.4rem 0 0 2.4rem}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal-field-wrapper{flex-direction:column}.buy-sell__modal-field-wrapper .dc-input__wrapper{margin-top:2.5rem;width:90vw}}.buy-sell__modal-field-wrapper>.dc-input{margin-top:1rem}.buy-sell__modal-form{height:-moz-fit-content !important;height:fit-content !important}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal-footer{border-top:2px solid var(--general-section-1);display:flex;flex-direction:row;justify-content:flex-end;margin-top:auto;padding:1.6rem}}.buy-sell__modal--input{display:flex;gap:2rem;flex-direction:column;padding:0 2.4rem 2rem;margin-bottom:2rem}.buy-sell__modal--input .dc-input__wrapper{margin-right:.2rem;margin-bottom:0;margin-bottom:initial}@media(min-width: 1024px){.buy-sell__modal--input-field{display:flex}}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal--input .dc-input__container{width:100%;padding:.5rem 1rem .5rem 1.2rem}.buy-sell__modal--input .dc-input__wrapper{margin:.8rem .2rem 1.4rem 0}}.buy-sell__modal-hintbox{margin:-0.5rem 0 2.4rem;padding:0 2.4rem}.buy-sell__modal-hintbox .dc-hint-box__icon{align-self:flex-start}.buy-sell__modal-icon{margin-right:.8rem}.buy-sell__modal-line{border-top:1px solid var(--general-section-5);margin:1.6rem 0;width:100%}.buy-sell__modal-payment-method{padding:0 2.4rem}.buy-sell__modal-payment-method--container{align-self:center;display:flex;flex-direction:column;margin-bottom:1.6rem;padding:0 2.4rem}.buy-sell__modal-payment-method--icon{border-radius:2px;margin-right:.8rem}.buy-sell__modal-payment-method--row{align-items:center;display:flex;flex-direction:row;margin-bottom:.8rem}.buy-sell__modal-payment-method--title{margin-bottom:.8rem}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal-receive-amount{border-top:1px solid var(--general-section-2);padding:.8rem 1.6rem;background-color:var(--general-main-1)}}.buy-sell__modal--sell-payment-methods{display:flex;flex-wrap:wrap;gap:.8rem;margin:1.6rem 0 2.4rem}.buy-sell__modal--sell-payment-methods .payment-method-card{margin:0;margin:initial}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal--sell-payment-methods .payment-method-card{min-height:8.8rem;min-width:0;min-width:initial;width:13.6rem}}.buy-sell__modal--sell-payment-methods .payment-method-card--add{margin:0;margin:initial}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal--sell-payment-methods .payment-method-card--add{min-height:8.8rem;width:13.6rem}}.buy-sell__modal--sell-payment-methods .payment-method-card__body{margin-top:.8rem}@media(min-width: 320px)and (max-width: 767px){.buy-sell__modal--sell-payment-methods .payment-method-card__body{margin-top:0}}.buy-sell__modal--sell-payment-methods--disable{opacity:.32}.buy-sell__modal--layout{padding:0;padding:initial}.buy-sell__modal--error-message{padding:0 2.4rem}.buy-sell__modal-content .dc-input{margin-bottom:0;margin-bottom:initial}.dc-modal__container_buy-sell__modal .dc-modal-header--buy-sell__modal{border-bottom:2px solid var(--general-section-5)}.dc-modal__container_buy-sell__modal .dc-modal-footer--separator{margin-top:1rem;border-top:2px solid var(--general-section-5)}",""]);const o=a},477:(e,t,r)=>{var n=r(6062),a=r(9978);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},4889:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var n=r(2779),a=r.n(n),o=r(5099),l=r.n(o),i=r(8156),s=r(1336),m=r(5770),c=r(4309),d=r(75),u=r(6128),_=r(2925),p=r(282),f=r(6633),h=r(7661),y=r(3440),b=r(3183);const v=function(){var e,t=(0,f.m)().buy_sell_store;return i.createElement("div",{className:"buy-sell__modal-receive-amount"},i.createElement(s.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},null!=t&&t.is_sell_advert?i.createElement(p.Xx,{i18n_default_text:"You'll receive"}):i.createElement(p.Xx,{i18n_default_text:"You'll send"})),i.createElement(s.Text,{as:"p",color:"general",line_height:"m",size:"xs",weight:"bold"},(0,m.getFormattedText)((0,b.WK)(null==t?void 0:t.receive_amount),null==t||null===(e=t.advert)||void 0===e?void 0:e.local_currency)))};var g=r(6378),x=r(9565),E=r(821),w=r(4047);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function A(){A=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function m(e,t,r,a){var o=t&&t.prototype instanceof u?t:u,l=Object.create(o.prototype),i=new k(a||[]);return n(l,"_invoke",{value:x(e,r,i)}),l}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=m;var d={};function u(){}function _(){}function p(){}var f={};s(f,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(C([])));y&&y!==t&&r.call(y,o)&&(f=y);var b=p.prototype=u.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function a(n,o,l,i){var s=c(e[n],e,o);if("throw"!==s.type){var m=s.arg,d=m.value;return d&&"object"==N(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,l,i)}),(function(e){a("throw",e,l,i)})):t.resolve(d).then((function(e){m.value=e,l(m)}),(function(e){return a("throw",e,l,i)}))}i(s.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var i=E(l,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=c(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return _.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:_,configurable:!0}),_.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(g.prototype),s(g.prototype,l,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var l=new g(m(t,r,n,a),o);return e.isGeneratorFunction(r)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},v(b),s(b,i,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return l.type="throw",l.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(i&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function k(e,t,r,n,a,o,l){try{var i=e[o](l),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){k(o,n,a,l,i,"next",e)}function i(e){k(o,n,a,l,i,"throw",e)}l(void 0)}))}}function F(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,i=[],s=!0,m=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){m=!0,a=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(m)throw a}}return i}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=(0,m.useIsMounted)(),r=(0,f.m)(),n=r.advertiser_page_store,o=r.buy_sell_store,l=r.floating_rate_store,u=r.general_store,_=r.my_profile_store,N=T(i.useState([]),2),k=N[0],I=N[1];o.setFormProps(e);var L=(0,w.M)().showModal,M=e.setPageFooterParent,P=(null==o?void 0:o.advert)||{},O=P.advertiser_details,R=P.description,D=P.effective_rate,j=P.local_currency,z=P.max_order_amount_limit_display,B=P.min_order_amount_limit,X=P.min_order_amount_limit_display,G=P.payment_method_names,Y=P.price,U=P.rate,H=P.rate_type,V=T(i.useState(B),2),W=V[0],q=V[1],K=u.advertiser_buy_limit,Z=u.advertiser_sell_limit,$=u.balance,Q=!o.is_buy_advert&&(0===parseFloat($)||parseFloat($)<B),J={borderColor:"var(--brand-secondary)",borderWidth:"2px",cursor:Q?"not-allowed":"pointer"},ee=(0,b.VH)({price:Y,rate_type:H,rate:U,local_currency:j,exchange_rate:l.exchange_rate,market_rate:D}),te=ee.effective_rate,re=ee.display_effective_rate,ne=(0,b.BP)((0,b.WK)(te,(0,b.v3)(te,6)));i.useEffect((function(){_.setShouldShowAddPaymentMethodForm(!1),_.setSelectedPaymentMethod(""),_.setSelectedPaymentMethodDisplayName(""),o.setHasPaymentMethods(!!G);var e=(0,d.U5)((function(){return o.receive_amount}),(function(){(0,m.isMobile)()&&"function"==typeof M&&M(i.createElement(v,null))}));_.advertiser_has_payment_methods||_.getPaymentMethodsList(),n.setFormErrorMessage("");var t=(0,d.U5)((function(){return l.is_market_rate_changed}),(function(e){e&&H===y.i.FLOAT&&L({key:"RateChangeModal",props:{currency:o.local_currency}})}));return o.setInitialReceiveAmount(ne),function(){o.payment_method_ids=[],e(),t()}}),[]),i.useEffect((function(){var e=W*ne;o.setReceiveAmount(e)}),[W,te]);var ae=function(e){Q||(o.payment_method_ids.includes(e.ID)?(o.payment_method_ids=o.payment_method_ids.filter((function(t){return t!==e.ID})),I(k.filter((function(t){return t!==e.ID})))):o.payment_method_ids.length<3&&(o.payment_method_ids.push(e.ID),I([].concat(F(k),[e.ID]))))},oe=function(){if(o.is_buy_advert){if(K<z)return(0,b.WK)(K)}else if(Z<z)return(0,b.WK)(Z);return z};return i.createElement(i.Fragment,null,H===y.i.FLOAT&&!Q&&i.createElement("div",{className:"buy-sell__modal-hintbox"},i.createElement(s.HintBox,{icon:"IcAlertInfo",message:i.createElement(s.Text,{as:"p",size:"xxxs",color:"prominent",line_height:"xs"},i.createElement(p.Xx,{i18n_default_text:"If the market rate changes from the rate shown here, we won't be able to process your order."})),is_info:!0})),i.createElement(h.Formik,{enableReinitialize:!0,validate:o.validatePopup,validateOnMount:!Q,initialValues:{amount:B,contact_info:u.contact_info,payment_info:u.payment_info,rate:H===y.i.FLOAT?te:null},initialErrors:o.is_sell_advert?{contact_info:!0}:{},onSubmit:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return o.handleSubmit.apply(o,[function(){return t()}].concat(r))}},(function(e){var t=e.errors,r=e.isSubmitting,n=e.isValid,l=e.validateForm,d=e.setFieldValue,f=e.submitForm,y=e.touched;return o.form_props.setIsSubmitDisabled(!n||r||o.is_sell_advert&&G&&k.length<1),o.form_props.setSubmitForm(f),i.createElement(h.Form,{noValidate:!0},i.createElement("div",{className:"buy-sell__modal-content"},i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(s.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},o.is_buy_advert?i.createElement(p.Xx,{i18n_default_text:"Seller"}):i.createElement(p.Xx,{i18n_default_text:"Buyer"})),i.createElement(s.Text,{as:"p",color:"general",line_height:"m",size:"xs"},O.name)),i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(s.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(p.Xx,{i18n_default_text:"Rate (1 {{ currency }})",values:{currency:o.account_currency}})),i.createElement(s.Text,{as:"p",color:"general",line_height:"m",size:"xs"},re," ",j))),i.createElement("div",{className:"buy-sell__modal-payment-method--container"},G&&i.createElement(s.Text,{as:"p",className:"buy-sell__modal-payment-method--title",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(p.Xx,{i18n_default_text:"Payment methods"})),G&&G.map((function(e,t){var r=e.replace(/\s|-/gm,"");return"BankTransfer"===r||"Other"===r?i.createElement("div",{className:"buy-sell__modal-payment-method--row",key:t},i.createElement(s.Icon,{className:"buy-sell__modal-payment-method--icon",icon:"IcCashier".concat(r),size:16}),i.createElement(s.Text,{as:"p",color:"general",line_height:"m",size:"xs"},e)):i.createElement("div",{className:"buy-sell__modal-payment-method--row",key:t},i.createElement(s.Icon,{className:"buy-sell__modal-payment-method--icon",icon:"IcCashierEwallet",size:16}),i.createElement(s.Text,{as:"p",color:"general",line_height:"m",size:"xs"},e))}))),i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(s.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},o.is_buy_advert?i.createElement(p.Xx,{i18n_default_text:"Seller's instructions"}):i.createElement(p.Xx,{i18n_default_text:"Buyer's instructions"})),R.trim().replace(/([\r\n]){2,}/g,"\n\n").split("\n").map((function(e,t){return i.createElement(s.Text,{key:t,as:"p",color:"general",line_height:"m",size:"xs"},e||"-")})))),i.createElement("div",{className:"buy-sell__modal-line"}),o.is_sell_advert&&G&&i.createElement(i.Fragment,null,i.createElement("div",{className:"buy-sell__modal-payment-method"},i.createElement(s.Text,{as:"p",className:"buy-sell__modal-payment-method--title",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(p.Xx,{i18n_default_text:"Receive payment to"})),i.createElement(s.Text,{as:"p",color:"prominent",line_height:"m",size:"xxs"},_.advertiser_has_payment_methods?i.createElement(p.Xx,{i18n_default_text:"You may choose up to 3."}):i.createElement(p.Xx,{i18n_default_text:"To place an order, add one of the advertiser’s preferred payment methods:"})),i.createElement(c.Qj,null,(function(){return i.createElement("div",{className:a()("buy-sell__modal--sell-payment-methods",{"buy-sell__modal--sell-payment-methods--disable":Q})},null==G?void 0:G.map((function(e,t){var r=_.advertiser_payment_methods_list,n=_.setSelectedPaymentMethodDisplayName,a=_.setShouldShowAddPaymentMethodForm,o=r.filter((function(t){return t.display_name===e}));return o.length>0?o.map((function(e){return i.createElement(g.Z,{is_vertical_ellipsis_visible:!1,key:t,medium:!0,onClick:C(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ae(e),t.next=3,l();case 3:case"end":return t.stop()}}),t)}))),payment_method:e,style:k.includes(e.ID)?J:{},disabled:Q})})):i.createElement(g.Z,{add_payment_method:e,is_add:!0,key:t,medium:!0,onClickAdd:function(){Q||(n(e),a(!0))},disabled:Q,style:{cursor:Q?"not-allowed":"pointer"}})})).sort((function(e){var t;return!Array.isArray(e)||null!==(t=e[0].props)&&void 0!==t&&t.is_add?1:-1})))}))),i.createElement("div",{className:"buy-sell__modal-line"})),i.createElement("div",{className:"buy-sell__modal--input"},i.createElement(s.Text,{color:"less-prominent",size:"xxs"},(0,p.NC)("Enter {{transaction_type}} amount",{transaction_type:o.is_buy_advert?"buy":"sell"})),i.createElement("section",{className:"buy-sell__modal--input-field"},i.createElement(h.Field,{name:"amount"},(function(e){var r=e.field;return i.createElement(s.Input,S({},r,{"data-lpignore":"true",type:"number",error:t.amount,label:(0,p.NC)("{{ad_type}}",{ad_type:o.is_buy_advert?"Buy amount":"Sell amount"}),hint:i.createElement(p.Xx,{i18n_default_text:"Limit: {{min}}–{{max}} {{currency}}",values:{min:X,max:oe(),currency:o.account_currency}}),is_relative_hint:!0,className:"buy-sell__modal-field",trailing_icon:i.createElement(s.Text,{color:"less-prominent","line-height":"m",size:"xs"},o.account_currency),onKeyDown:function(e){(0,x.oB)(e.key)||e.preventDefault()},onChange:function(e){var t=e.target.value;(0,E.vk)(t)>(0,m.getDecimalPlaces)(o.account_currency)?d("amount",parseFloat(W)):(d("amount",parseFloat(t)),q(t))},required:!0,value:W,disabled:Q}))})),(0,m.isDesktop)()&&i.createElement("div",{className:a()("buy-sell__modal-field",{"buy-sell__modal-field--disable":Q})},i.createElement(v,null)))),o.is_sell_advert&&i.createElement(i.Fragment,null,!G&&i.createElement("div",{className:"buy-sell__modal-field--textarea"},i.createElement(h.Field,{name:"payment_info"},(function(e){var r=e.field;return i.createElement(s.Input,S({},r,{"data-lpignore":"true",type:"textarea",error:y.payment_info&&t.payment_info,hint:(0,p.NC)("Bank name, account number, beneficiary name"),is_relative_hint:!0,label:(0,p.NC)("Your bank details"),required:!0,has_character_counter:!0,initial_character_count:u.payment_info.length,max_characters:300,disabled:Q}))}))),i.createElement("div",{className:"buy-sell__modal-field--textarea"},i.createElement(h.Field,{name:"contact_info"},(function(e){var r=e.field;return i.createElement(s.Input,S({},r,{"data-lpignore":"true",type:"textarea",error:y.contact_info&&t.contact_info,label:(0,p.NC)("Your contact details"),required:!0,has_character_counter:!0,initial_character_count:u.contact_info.length,max_characters:300,disabled:Q}))}))))))})))};M.propTypes={advert:l().object,contact_info:l().string,form_props:l().object,setIsSubmitDisabled:l().func,setSubmitForm:l().func,setPageFooterParent:l().func,has_payment_info:l().bool,is_buy_advert:l().bool,is_sell_advert:l().bool,payment_info:l().string,receive_amount:l().number,setFormProps:l().func,setInitialReceiveAmount:l().func,setReceiveAmount:l().func,validatePopup:l().func};const P=(0,c.Pi)(M);var O=r(268),R=r(9569),D=r(6441);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,i=[],s=!0,m=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){m=!0,a=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(m)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(){return i.createElement("div",{className:"buy-sell__modal--error-message"},i.createElement(s.HintBox,{className:"buy-sell__modal-danger",icon:"IcAlertDanger",message:i.createElement(s.Text,{as:"p",size:"xxxs",color:"prominent",line_height:"s"},i.createElement(p.Xx,{i18n_default_text:"Your Deriv P2P balance isn't enough. Please increase your balance before trying again."})),is_danger:!0}))},X=function(e){var t=e.onCancel,r=e.is_submit_disabled,n=e.onSubmit,a=(0,f.m)().my_profile_store;return i.createElement("div",{className:a.should_show_add_payment_method_form?"add-payment-method__footer":"buy-sell__modal-footer"},i.createElement(s.Button.Group,null,i.createElement(s.Button,{secondary:!0,onClick:t,large:!0},(0,p.NC)("Cancel")),i.createElement(s.Button,{is_disabled:r,primary:!0,large:!0,onClick:n},(0,p.NC)("Confirm"))))};X.propTypes={onCancel:l().func.isRequired,is_submit_disabled:l().bool,onSubmit:l().func.isRequired};var G=function(){var e=(0,f.m)(),t=e.general_store,r=e.buy_sell_store,n=e.advertiser_page_store,a=e.my_profile_store,o=(0,w.M)().showModal,l=r.selected_ad_state.account_currency,c=r.show_advertiser_page?n.counterparty_type:r.table_type;return a.should_show_add_payment_method_form?(0,m.isDesktop)()?i.createElement(i.Fragment,null,i.createElement(s.Icon,{icon:"IcArrowLeftBold",onClick:function(){t.is_form_modified?o({key:"CancelAddPaymentMethodModal"}):a.setShouldShowAddPaymentMethodForm(!1)},className:"buy-sell__modal-icon"}),(0,p.NC)("Add payment method")):(0,p.NC)("Add payment method"):c===_.V.BUY?(0,p.NC)("Buy {{ currency }}",{currency:l}):(0,p.NC)("Sell {{ currency }}",{currency:l})};const Y=(0,c.Pi)((function(){var e=(0,f.m)(),t=e.buy_sell_store,r=e.floating_rate_store,n=e.general_store,o=e.my_profile_store,l=e.order_store,c=i.useRef((function(){})),h=j((0,s.useSafeState)(null),2),y=h[0],b=h[1],g=j((0,s.useSafeState)(!0),2),x=g[0],E=g[1],N=j(i.useState(!1),2),S=N[0],A=N[1],k=j(i.useState(!1),2),C=k[0],F=k[1],T=(0,w.M)(),I=T.hideModal,L=T.is_modal_open,M=T.showModal,z=(0,u.useHistory)(),Y=(0,u.useLocation)();i.useEffect((function(){var e=(0,d.U5)((function(){return t.advert}),(function(e,t){var r=(null==t?void 0:t.rate)&&t.rate!==e.rate,n=(null==t?void 0:t.id)===e.id;r&&n&&(F(!0),setTimeout((function(){F(!1)}),2e3))})),r=(0,d.U5)((function(){return t.form_error_code}),(function(){t.form_error_code===D.N.ORDER_CREATE_FAIL_RATE_CHANGED&&((0,m.isDesktop)()?setTimeout((function(){return M({key:"MarketRateChangeErrorModal"})}),280):M({key:"MarketRateChangeErrorModal"}),t.setFormErrorCode(""),b(null))}));return function(){e(),r()}}),[]);var U=function(){return y&&t.form_error_code!==D.N.ORDER_CREATE_FAIL_RATE_CHANGED?i.createElement("div",{className:"buy-sell__modal--error-message"},i.createElement(s.HintBox,{className:"buy-sell__modal-danger",icon:"IcAlertDanger",message:i.createElement(s.Text,{as:"p",size:"xxxs",color:"prominent",line_height:"s"},t.form_error_code===D.N.ORDER_CREATE_FAIL_CLIENT_BALANCE?i.createElement(p.Xx,{i18n_default_text:"Your Deriv P2P balance isn't enough. Please increase your balance before trying again."}):y),is_danger:!0})):null},H=function(){o.should_show_add_payment_method_form?n.is_form_modified?M({key:"CancelAddPaymentMethodModal"}):o.hideAddPaymentMethodForm():(I(),t.fetchAdvertiserAdverts()),r.setIsMarketRateChanged(!1)},V=function(e){var r=new URLSearchParams(Y.search);r.append("order",e.id),n.redirectTo("orders",{nav:{location:"buy_sell"}}),z.replace({pathname:m.routes.p2p_orders,search:r.toString(),hash:Y.hash}),l.setOrderId(e.id),I(),t.fetchAdvertiserAdverts(),t.setShowAdvertiserPage(!1)},W=function(e){return c.current=e},q=y&&t.form_error_code===D.N.ORDER_CREATE_FAIL_RATE_CHANGED||C?function(){(0,m.isDesktop)()?setTimeout((function(){return M({key:"MarketRateChangeErrorModal"})}),o.MODAL_TRANSITION_DURATION):M({key:"MarketRateChangeErrorModal"})}:c.current;i.useEffect((function(){var e,r=0===parseFloat(n.balance)||parseFloat(n.balance)<(null===(e=t.advert)||void 0===e?void 0:e.min_order_amount_limit);A(r),L||b(null)}),[L]);var K=n.nickname?P:O.Z;return i.createElement(i.Fragment,null,i.createElement(s.MobileWrapper,null,i.createElement(s.MobileFullPageModal,{body_className:"buy-sell__modal-body",className:"buy-sell__modal",height_offset:"80px",is_flex:!0,is_modal_open:L,page_header_className:"buy-sell__modal-header",page_header_text:i.createElement(G,null),pageHeaderReturnFn:H},t.table_type===_.V.SELL&&S&&i.createElement(B,null),!!y&&i.createElement(U,null),o.should_show_add_payment_method_form?i.createElement(R.Z,{should_show_separated_footer:!0}):i.createElement(i.Fragment,null,i.createElement(K,{advert:t.selected_ad_state,handleClose:H,handleConfirm:V,setIsSubmitDisabled:E,setErrorMessage:b,setSubmitForm:W}),i.createElement(v,{is_sell_advert:t.is_sell_advert,local_currency:(null==t?void 0:t.advert)&&t.advert.local_currency,receive_amount:t.receive_amount}),i.createElement(X,{is_submit_disabled:x,onCancel:H,onSubmit:c.current})))),i.createElement(s.DesktopWrapper,null,i.createElement(s.Modal,{className:a()("buy-sell__modal",{"buy-sell__modal-form":o.should_show_add_payment_method_form}),height:t.table_type===_.V.BUY?"auto":"649px",width:"456px",is_open:L,title:i.createElement(G,null),portalId:"modal_root",toggleModal:H},i.createElement(s.ThemedScrollbars,{height:t.table_type===_.V.BUY?"100%":"calc(100% - 5.8rem - 7.4rem)"},i.createElement(s.Modal.Body,{className:"buy-sell__modal--layout"},t.table_type===_.V.SELL&&S&&i.createElement(B,null),i.createElement(U,null),o.should_show_add_payment_method_form?i.createElement(R.Z,{should_show_separated_footer:!0}):i.createElement(K,{advert:t.selected_ad_state,handleClose:H,handleConfirm:V,setIsSubmitDisabled:E,setErrorMessage:b,setSubmitForm:W}))),!o.should_show_add_payment_method_form&&i.createElement(s.Modal.Footer,{has_separator:!0},o.should_show_add_payment_method_form?null:i.createElement(X,{is_submit_disabled:x,onCancel:H,onSubmit:q})))))}));r(477);const U=Y}}]);